local pb = require 'pb'
local protoc = require 'protoc'

file = io.open("Assets/Resources/Protos/Message.proto");

message = '';

line = file:read();

while(line ~= nil) do
    message = message .. line;
    line = file:read();
end

local msg = {
    type = 0,
    head = 'update',
    body = 'Map'
}

assert(protoc:load(message));

bytes = assert(pb.encode("MessageProto",msg));
function update()

    if CS.UnityEngine.Input.GetKeyDown(CS.UnityEngine.KeyCode.Z) then
        print('按下Z');
        msg = CS.Message.ByteMessage(CS.Message.MessageType.SocketToServer,bytes);
        result = messageQueue:SendMessage(msg);
    end
    
end